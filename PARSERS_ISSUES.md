# ⚠️ Проблемы с парсерами магазинов

## Текущие проблемы

### 1. DNS Shop - 401 Unauthorized
**Проблема:** Сайт возвращает 401 ошибку, блокируя запросы.

**Возможные причины:**
- Сайт требует авторизацию для поиска
- Защита от ботов (Cloudflare, антибот системы)
- Недостаточно реалистичные заголовки

**Решения:**
1. ✅ Улучшены заголовки HTTP (добавлены Referer, Origin, Sec-Fetch-*)
2. ⚠️ Может потребоваться использование Selenium для обхода защиты
3. ⚠️ Может потребоваться использование прокси
4. ⚠️ Может потребоваться использование официального API (если доступно)

### 2. М.Видео - не находит товары
**Проблема:** Парсер не находит товары на странице.

**Возможные причины:**
- Селекторы устарели (структура сайта изменилась)
- Сайт использует JavaScript для загрузки контента
- Защита от ботов

**Решения:**
1. ✅ Улучшены заголовки HTTP
2. ✅ Добавлены более гибкие селекторы
3. ⚠️ Может потребоваться использование Selenium для JavaScript-контента
4. ⚠️ Нужно обновить селекторы вручную через DevTools

## Временное решение

Пока парсеры не работают, можно:

1. **Использовать только Wildberries** (когда разблокируется)
2. **Использовать статические данные** из БД
3. **Использовать другие источники** (Ozon, Яндекс.Маркет - если есть API)

## Как обновить селекторы

1. Откройте сайт магазина в браузере
2. Откройте DevTools (F12)
3. Найдите элементы:
   - Карточка товара
   - Название товара
   - Цена
   - Ссылка на товар
4. Обновите селекторы в `parsers.py`

## Использование Selenium (для будущего)

Если нужно обойти JavaScript и защиту от ботов:

```python
from selenium import webdriver
from selenium.webdriver.common.by import By

driver = webdriver.Chrome()
driver.get(url)
# Ждем загрузки JavaScript
time.sleep(3)
# Парсим загруженную страницу
soup = BeautifulSoup(driver.page_source, 'html.parser')
```

## Рекомендации

1. **Мониторинг:** Следите за логами, чтобы видеть, когда парсеры перестают работать
2. **Обновление:** Регулярно проверяйте и обновляйте селекторы
3. **Fallback:** Всегда имейте запасной вариант (Wildberries, статические данные)
4. **Кэширование:** Используйте Redis для кэширования результатов
